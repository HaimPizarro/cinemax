
<!-- CONTENIDO -->
<main class="container flex-grow-1 py-5">
  <h2 class="mb-4">Mi Perfil</h2>

  <!-- aviso sin sesión -->
  <div *ngIf="!sesion" class="alert alert-danger">
    Debes iniciar sesión para ver tu perfil.
  </div>

  <!-- datos -->
  <div *ngIf="sesion">
    <!-- correo -->
    <div class="field-row">
      <div class="field-label">Correo</div>
      <div class="field-value">{{ sesion.email }}</div>
    </div>

    <!-- nombre -->
    <div class="field-row">
      <div class="field-label">Nombre</div>
      <div class="field-value d-flex align-items-center">
        <span *ngIf="!editandoNombre">{{ sesion.nombre }}</span>
        <input *ngIf="editandoNombre" [(ngModel)]="nuevoNombre" class="form-control form-control-sm edit-input" />
      </div>
      <div class="d-flex ms-2">
        <button *ngIf="!editandoNombre" class="btn btn-outline-secondary edit-btn" (click)="editarNombre()">
          <i class="bi bi-pencil"></i>
        </button>
        <button *ngIf="editandoNombre" class="btn btn-outline-success edit-btn ms-1" (click)="guardarNombre()">
          <i class="bi bi-check-lg"></i>
        </button>
      </div>
    </div>

    <!-- contraseña -->
    <div class="field-row">
      <div class="field-label">Contraseña</div>
      <div class="field-value"><span>••••••••</span></div>
      <button class="btn btn-outline-secondary edit-btn ms-2" (click)="editandoPass = !editandoPass">
        <i class="bi bi-pencil"></i>
      </button>
    </div>

    <!-- form contraseña -->
    <form *ngIf="editandoPass" (ngSubmit)="guardarPassword()" class="mt-3">
      <div class="mb-3 row">
        <label class="col-sm-3 col-form-label">Nueva</label>
        <div class="col-sm-9">
          <input [(ngModel)]="nuevaPass" name="nuevaPass" type="password" class="form-control form-control-sm" placeholder="Nueva contraseña" />
        </div>
      </div>
      <div class="mb-3 row">
        <label class="col-sm-3 col-form-label">Confirmar</label>
        <div class="col-sm-9 d-flex">
          <input [(ngModel)]="nuevaPass2" name="nuevaPass2" type="password" class="form-control form-control-sm" placeholder="Confirmar contraseña" />
          <button type="submit" class="btn btn-outline-success edit-btn ms-2">
            <i class="bi bi-check-lg"></i>
          </button>
        </div>
      </div>
      <div *ngIf="passMsg" class="text-danger">{{ passMsg }}</div>
    </form>
  </div>
</main>
